JD 商品评论爬虫项目
一、项目概述
本项目是一个用于爬取京东商品评论数据的 Python 爬虫程序。它能够根据配置文件中的商品链接，获取商品的评论信息，并将其保存为 CSV 文件，方便后续进行数据分析、情感研究等工作。
二、项目特点
高度可配置化：通过修改配置文件config.py，可以灵活设置是否遍历评论排序方式，以及添加或修改要爬取的商品 URL。
摆脱 pandas 依赖：采用with open结合csv模块的方式写入数据，减少了对第三方库的依赖，降低了项目的复杂性。
模块化设计：将请求处理、数据获取等功能封装在不同模块中，提高了代码的可读性和可维护性。
三、项目结构
plaintext
JD_Comment_Spider/
│
├── data/                # 用于存储爬取的数据
│   ├── output/          # 存储爬取结果的CSV文件
│   └── url.xlsx         # 存储商品URL的Excel文件（原项目保留，现可忽略，URL在config.py中配置）
│
├── logs/                # 用于存储日志文件
│   └── spider.log       # 日志文件，记录爬虫运行过程中的关键信息
│
├── utils/               # 存放工具函数和类
│   ├── __init__.py      # 初始化文件，使Python将该目录视为一个Python包
│   └── request_utils.py # 封装请求相关的工具函数，如发送请求、处理JSON数据
│
├── main.py              # 主程序入口，负责调用各个模块的功能，控制爬虫的运行流程
├── config.py            # 配置文件，存储常量和配置信息，如请求头、URL格式、是否遍历排序方式、商品URL列表等
├── README.md            # 当前项目说明文档，介绍项目的功能、使用方法、依赖库等信息
└── requirements.txt     # 项目依赖的Python库列表，方便用户安装项目所需的依赖

四、使用方法
（一）配置文件修改
商品 URL 配置：打开config.py文件，找到PRODUCT_URLS列表。在列表中添加或修改要爬取的京东商品链接。例如：
python
PRODUCT_URLS = [
    "https://item.jd.com/123456.html",  # 替换为实际的商品URL
    "https://item.jd.com/789012.html"   # 可以添加多个商品URL
]
是否遍历评论排序方式配置：在config.py文件中，找到TRAVERSE_SORTING配置项。如果希望遍历所有评论排序方式（如全部商品、晒图、追评、好评等），将其设置为True；如果只希望按全部评论排序，设置为False。例如：
python
TRAVERSE_SORTING = True  # 开启遍历评论排序方式
# TRAVERSE_SORTING = False  # 只按全部评论排序
（二）安装依赖库
打开命令行工具，进入项目所在目录，执行以下命令安装项目所需的依赖库：
bash
pip install -r requirements.txt
依赖库主要包括：
requests：用于发送 HTTP 请求，获取网页数据。
fake - useragent：用于生成随机的用户代理，模拟不同的浏览器访问，避免被网站识别为爬虫。
（三）运行爬虫
在命令行中确保当前目录为项目根目录，执行以下命令启动爬虫：
bash
python main.py
运行过程中，程序会在命令行输出爬取进度信息，如当前正在爬取的商品、排序方式、页码以及已爬取的评论数量等。同时，爬取的评论数据会保存到data/output目录下，每个商品对应一个或多个 CSV 文件，文件名包含商品 ID 和排序方式信息。
五、注意事项
（一）遵守网站规则
请遵守京东平台的使用规则和法律法规，不要过度或恶意爬取数据，避免对网站造成不必要的负担或侵犯他人权益。本项目仅供学习和研究使用，未经授权请勿用于商业用途。
（二）网络及反爬机制
网络状况会影响爬虫的运行效果。请确保网络连接稳定，否则可能会出现请求失败、数据获取不完整等问题。
京东可能会采取反爬措施，如限制访问频率、检测异常请求等。本项目通过设置随机的用户代理和合理的请求间隔时间（0.5 - 2 秒）来尽量避免被反爬机制拦截，但仍不能完全保证不被限制。如果遇到频繁请求失败的情况，建议适当调整请求间隔时间或暂停爬取操作。
（三）数据处理与存储
爬取的数据仅包含评论相关的基本信息，如用户 ID、评论内容、购买时间等。如果需要获取更多信息，可能需要进一步修改代码逻辑。
由于京东商品评论数量可能较多，爬取过程可能会花费较长时间。请确保存储设备有足够的空间来保存爬取的数据。
六、常见问题及解决方法
（一）安装依赖失败
问题描述：执行pip install -r requirements.txt命令时，出现依赖库安装失败的提示。
可能原因：网络问题、Python 环境配置不正确、依赖库版本冲突等。
解决方法：检查网络连接，确保网络正常；尝试升级pip到最新版本（pip install --upgrade pip）；如果是版本冲突问题，可以手动指定依赖库的版本进行安装，或者参考相关依赖库的官方文档解决版本兼容性问题。
（二）爬虫运行时出错
问题描述：执行python main.py后，程序报错停止运行。
可能原因：配置文件错误、请求被网站拒绝、代码逻辑错误等。
解决方法：检查config.py文件中的配置项是否正确，特别是商品 URL 和配置参数；查看logs/spider.log日志文件，获取详细的错误信息，根据错误提示进行排查和修复；如果是请求被拒绝，可能需要调整请求头或请求间隔时间。
七、贡献指南
如果你对本项目感兴趣，欢迎参与贡献。你可以通过以下方式进行贡献：
提出问题和建议：在项目的 GitHub 仓库中创建新的 Issue，描述你发现的问题或提出改进建议。
提交代码：如果你对代码进行了修改或添加了新功能，可以创建 Pull Request，详细说明你的修改内容和目的，等待项目维护者审核和合并。
八、联系方式
如果你在使用本项目过程中有任何疑问或需要帮助，可以通过以下方式联系项目作者：
邮箱：[填写你的邮箱地址]
GitHub：在本项目的 GitHub 仓库中提交 Issue 或直接联系项目作者。